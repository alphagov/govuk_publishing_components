{"version":3,"file":"character-count.mjs","sources":["../../../../src/govuk/components/character-count/character-count.mjs"],"sourcesContent":["/* eslint-disable es-x/no-date-now -- Polyfill imported */\n/* eslint-disable es-x/no-function-prototype-bind -- Polyfill imported */\n\nimport { closestAttributeValue } from '../../common/closest-attribute-value.mjs'\nimport { extractConfigByNamespace, mergeConfigs } from '../../common/index.mjs'\nimport { normaliseDataset } from '../../common/normalise-dataset.mjs'\nimport { I18n } from '../../i18n.mjs'\nimport '../../vendor/polyfills/Date/now.mjs'\nimport '../../vendor/polyfills/Element/prototype/classList.mjs'\nimport '../../vendor/polyfills/Event.mjs' // addEventListener, event.target normalization and DOMContentLoaded\nimport '../../vendor/polyfills/Function/prototype/bind.mjs'\n\n/**\n * @constant\n * @type {CharacterCountTranslations}\n * @see Default value for {@link CharacterCountConfig.i18n}\n * @default\n */\nvar CHARACTER_COUNT_TRANSLATIONS = {\n  // Characters\n  charactersUnderLimit: {\n    one: 'You have %{count} character remaining',\n    other: 'You have %{count} characters remaining'\n  },\n  charactersAtLimit: 'You have 0 characters remaining',\n  charactersOverLimit: {\n    one: 'You have %{count} character too many',\n    other: 'You have %{count} characters too many'\n  },\n  // Words\n  wordsUnderLimit: {\n    one: 'You have %{count} word remaining',\n    other: 'You have %{count} words remaining'\n  },\n  wordsAtLimit: 'You have 0 words remaining',\n  wordsOverLimit: {\n    one: 'You have %{count} word too many',\n    other: 'You have %{count} words too many'\n  },\n  textareaDescription: {\n    other: ''\n  }\n}\n\n/**\n * JavaScript enhancements for the CharacterCount component\n *\n * Tracks the number of characters or words in the `.govuk-js-character-count`\n * `<textarea>` inside the element. Displays a message with the remaining number\n * of characters/words available, or the number of characters/words in excess.\n *\n * You can configure the message to only appear after a certain percentage\n * of the available characters/words has been entered.\n *\n * @class\n * @param {Element} $module - HTML element to use for character count\n * @param {CharacterCountConfig} [config] - Character count config\n */\nfunction CharacterCount ($module, config) {\n  if (!($module instanceof HTMLElement)) {\n    return this\n  }\n\n  var $textarea = $module.querySelector('.govuk-js-character-count')\n  if (\n    !(\n      $textarea instanceof HTMLTextAreaElement ||\n      $textarea instanceof HTMLInputElement\n    )\n  ) {\n    return this\n  }\n\n  var defaultConfig = {\n    threshold: 0,\n    i18n: CHARACTER_COUNT_TRANSLATIONS\n  }\n\n  // Read config set using dataset ('data-' values)\n  var datasetConfig = normaliseDataset($module.dataset)\n\n  // To ensure data-attributes take complete precedence, even if they change the\n  // type of count, we need to reset the `maxlength` and `maxwords` from the\n  // JavaScript config.\n  //\n  // We can't mutate `config`, though, as it may be shared across multiple\n  // components inside `initAll`.\n  var configOverrides = {}\n  if ('maxwords' in datasetConfig || 'maxlength' in datasetConfig) {\n    configOverrides = {\n      maxlength: false,\n      maxwords: false\n    }\n  }\n\n  /**\n   * @deprecated Will be made private in v5.0\n   * @type {CharacterCountConfig}\n   */\n  this.config = mergeConfigs(\n    defaultConfig,\n    config || {},\n    configOverrides,\n    datasetConfig\n  )\n\n  /** @deprecated Will be made private in v5.0 */\n  this.i18n = new I18n(extractConfigByNamespace(this.config, 'i18n'), {\n    // Read the fallback if necessary rather than have it set in the defaults\n    locale: closestAttributeValue($module, 'lang')\n  })\n\n  /** @deprecated Will be made private in v5.0 */\n  this.maxLength = Infinity\n  // Determine the limit attribute (characters or words)\n  if ('maxwords' in this.config && this.config.maxwords) {\n    this.maxLength = this.config.maxwords\n  } else if ('maxlength' in this.config && this.config.maxlength) {\n    this.maxLength = this.config.maxlength\n  } else {\n    return\n  }\n\n  /** @deprecated Will be made private in v5.0 */\n  this.$module = $module\n\n  /** @deprecated Will be made private in v5.0 */\n  this.$textarea = $textarea\n\n  /** @deprecated Will be made private in v5.0 */\n  this.$visibleCountMessage = null\n\n  /** @deprecated Will be made private in v5.0 */\n  this.$screenReaderCountMessage = null\n\n  /** @deprecated Will be made private in v5.0 */\n  this.lastInputTimestamp = null\n\n  /** @deprecated Will be made private in v5.0 */\n  this.lastInputValue = ''\n\n  /** @deprecated Will be made private in v5.0 */\n  this.valueChecker = null\n}\n\n/**\n * Initialise component\n */\nCharacterCount.prototype.init = function () {\n  // Check that required elements are present\n  if (!this.$module || !this.$textarea) {\n    return\n  }\n\n  var $textarea = this.$textarea\n  var $textareaDescription = document.getElementById($textarea.id + '-info')\n  if (!$textareaDescription) {\n    return\n  }\n\n  // Inject a description for the textarea if none is present already\n  // for when the component was rendered with no maxlength, maxwords\n  // nor custom textareaDescriptionText\n  if ($textareaDescription.innerText.match(/^\\s*$/)) {\n    $textareaDescription.innerText = this.i18n.t('textareaDescription', { count: this.maxLength })\n  }\n\n  // Move the textarea description to be immediately after the textarea\n  // Kept for backwards compatibility\n  $textarea.insertAdjacentElement('afterend', $textareaDescription)\n\n  // Create the *screen reader* specific live-updating counter\n  // This doesn't need any styling classes, as it is never visible\n  var $screenReaderCountMessage = document.createElement('div')\n  $screenReaderCountMessage.className = 'govuk-character-count__sr-status govuk-visually-hidden'\n  $screenReaderCountMessage.setAttribute('aria-live', 'polite')\n  this.$screenReaderCountMessage = $screenReaderCountMessage\n  $textareaDescription.insertAdjacentElement('afterend', $screenReaderCountMessage)\n\n  // Create our live-updating counter element, copying the classes from the\n  // textarea description for backwards compatibility as these may have been\n  // configured\n  var $visibleCountMessage = document.createElement('div')\n  $visibleCountMessage.className = $textareaDescription.className\n  $visibleCountMessage.classList.add('govuk-character-count__status')\n  $visibleCountMessage.setAttribute('aria-hidden', 'true')\n  this.$visibleCountMessage = $visibleCountMessage\n  $textareaDescription.insertAdjacentElement('afterend', $visibleCountMessage)\n\n  // Hide the textarea description\n  $textareaDescription.classList.add('govuk-visually-hidden')\n\n  // Remove hard limit if set\n  $textarea.removeAttribute('maxlength')\n\n  this.bindChangeEvents()\n\n  // When the page is restored after navigating 'back' in some browsers the\n  // state of the character count is not restored until *after* the\n  // DOMContentLoaded event is fired, so we need to manually update it after the\n  // pageshow event in browsers that support it.\n  window.addEventListener(\n    'onpageshow' in window ? 'pageshow' : 'DOMContentLoaded',\n    this.updateCountMessage.bind(this)\n  )\n\n  this.updateCountMessage()\n}\n\n/**\n * Bind change events\n *\n * Set up event listeners on the $textarea so that the count messages update\n * when the user types.\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.bindChangeEvents = function () {\n  var $textarea = this.$textarea\n  $textarea.addEventListener('keyup', this.handleKeyUp.bind(this))\n\n  // Bind focus/blur events to start/stop polling\n  $textarea.addEventListener('focus', this.handleFocus.bind(this))\n  $textarea.addEventListener('blur', this.handleBlur.bind(this))\n}\n\n/**\n * Handle key up event\n *\n * Update the visible character counter and keep track of when the last update\n * happened for each keypress\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.handleKeyUp = function () {\n  this.updateVisibleCountMessage()\n  this.lastInputTimestamp = Date.now()\n}\n\n/**\n * Handle focus event\n *\n * Speech recognition software such as Dragon NaturallySpeaking will modify the\n * fields by directly changing its `value`. These changes don't trigger events\n * in JavaScript, so we need to poll to handle when and if they occur.\n *\n * Once the keyup event hasn't been detected for at least 1000 ms (1s), check if\n * the textarea value has changed and update the count message if it has.\n *\n * This is so that the update triggered by the manual comparison doesn't\n * conflict with debounced KeyboardEvent updates.\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.handleFocus = function () {\n  this.valueChecker = setInterval(function () {\n    if (!this.lastInputTimestamp || (Date.now() - 500) >= this.lastInputTimestamp) {\n      this.updateIfValueChanged()\n    }\n  }.bind(this), 1000)\n}\n\n/**\n * Handle blur event\n *\n * Stop checking the textarea value once the textarea no longer has focus\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.handleBlur = function () {\n  // Cancel value checking on blur\n  clearInterval(this.valueChecker)\n}\n\n/**\n * Update count message if textarea value has changed\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.updateIfValueChanged = function () {\n  if (this.$textarea.value !== this.lastInputValue) {\n    this.lastInputValue = this.$textarea.value\n    this.updateCountMessage()\n  }\n}\n\n/**\n * Update count message\n *\n * Helper function to update both the visible and screen reader-specific\n * counters simultaneously (e.g. on init)\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.updateCountMessage = function () {\n  this.updateVisibleCountMessage()\n  this.updateScreenReaderCountMessage()\n}\n\n/**\n * Update visible count message\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.updateVisibleCountMessage = function () {\n  var $textarea = this.$textarea\n  var $visibleCountMessage = this.$visibleCountMessage\n  var remainingNumber = this.maxLength - this.count($textarea.value)\n\n  // If input is over the threshold, remove the disabled class which renders the\n  // counter invisible.\n  if (this.isOverThreshold()) {\n    $visibleCountMessage.classList.remove('govuk-character-count__message--disabled')\n  } else {\n    $visibleCountMessage.classList.add('govuk-character-count__message--disabled')\n  }\n\n  // Update styles\n  if (remainingNumber < 0) {\n    $textarea.classList.add('govuk-textarea--error')\n    $visibleCountMessage.classList.remove('govuk-hint')\n    $visibleCountMessage.classList.add('govuk-error-message')\n  } else {\n    $textarea.classList.remove('govuk-textarea--error')\n    $visibleCountMessage.classList.remove('govuk-error-message')\n    $visibleCountMessage.classList.add('govuk-hint')\n  }\n\n  // Update message\n  $visibleCountMessage.innerText = this.getCountMessage()\n}\n\n/**\n * Update screen reader count message\n *\n * @deprecated Will be made private in v5.0\n */\nCharacterCount.prototype.updateScreenReaderCountMessage = function () {\n  var $screenReaderCountMessage = this.$screenReaderCountMessage\n\n  // If over the threshold, remove the aria-hidden attribute, allowing screen\n  // readers to announce the content of the element.\n  if (this.isOverThreshold()) {\n    $screenReaderCountMessage.removeAttribute('aria-hidden')\n  } else {\n    $screenReaderCountMessage.setAttribute('aria-hidden', 'true')\n  }\n\n  // Update message\n  $screenReaderCountMessage.innerText = this.getCountMessage()\n}\n\n/**\n * Count the number of characters (or words, if `config.maxwords` is set)\n * in the given text\n *\n * @deprecated Will be made private in v5.0\n * @param {string} text - The text to count the characters of\n * @returns {number} the number of characters (or words) in the text\n */\nCharacterCount.prototype.count = function (text) {\n  if ('maxwords' in this.config && this.config.maxwords) {\n    var tokens = text.match(/\\S+/g) || [] // Matches consecutive non-whitespace chars\n    return tokens.length\n  } else {\n    return text.length\n  }\n}\n\n/**\n * Get count message\n *\n * @deprecated Will be made private in v5.0\n * @returns {string} Status message\n */\nCharacterCount.prototype.getCountMessage = function () {\n  var remainingNumber = this.maxLength - this.count(this.$textarea.value)\n\n  var countType = 'maxwords' in this.config && this.config.maxwords ? 'words' : 'characters'\n  return this.formatCountMessage(remainingNumber, countType)\n}\n\n/**\n * Formats the message shown to users according to what's counted\n * and how many remain\n *\n * @deprecated Will be made private in v5.0\n * @param {number} remainingNumber - The number of words/characaters remaining\n * @param {string} countType - \"words\" or \"characters\"\n * @returns {string} Status message\n */\nCharacterCount.prototype.formatCountMessage = function (remainingNumber, countType) {\n  if (remainingNumber === 0) {\n    return this.i18n.t(countType + 'AtLimit')\n  }\n\n  var translationKeySuffix = remainingNumber < 0 ? 'OverLimit' : 'UnderLimit'\n\n  return this.i18n.t(countType + translationKeySuffix, { count: Math.abs(remainingNumber) })\n}\n\n/**\n * Check if count is over threshold\n *\n * Checks whether the value is over the configured threshold for the input.\n * If there is no configured threshold, it is set to 0 and this function will\n * always return true.\n *\n * @deprecated Will be made private in v5.0\n * @returns {boolean} true if the current count is over the config.threshold\n *   (or no threshold is set)\n */\nCharacterCount.prototype.isOverThreshold = function () {\n  // No threshold means we're always above threshold so save some computation\n  if (!this.config.threshold) {\n    return true\n  }\n\n  var $textarea = this.$textarea\n\n  // Determine the remaining number of characters/words\n  var currentLength = this.count($textarea.value)\n  var maxLength = this.maxLength\n\n  var thresholdValue = maxLength * this.config.threshold / 100\n\n  return (thresholdValue <= currentLength)\n}\n\nexport default CharacterCount\n\n/**\n * Character count config\n *\n * @typedef {CharacterCountConfigWithMaxLength | CharacterCountConfigWithMaxWords} CharacterCountConfig\n */\n\n/**\n * Character count config (with maximum number of characters)\n *\n * @typedef {object} CharacterCountConfigWithMaxLength\n * @property {number} [maxlength] - The maximum number of characters.\n *   If maxwords is provided, the maxlength option will be ignored.\n * @property {number} [threshold = 0] - The percentage value of the limit at\n *   which point the count message is displayed. If this attribute is set, the\n *   count message will be hidden by default.\n * @property {CharacterCountTranslations} [i18n = CHARACTER_COUNT_TRANSLATIONS] - See constant {@link CHARACTER_COUNT_TRANSLATIONS}\n */\n\n/**\n * Character count config (with maximum number of words)\n *\n * @typedef {object} CharacterCountConfigWithMaxWords\n * @property {number} [maxwords] - The maximum number of words. If maxwords is\n *   provided, the maxlength option will be ignored.\n * @property {number} [threshold = 0] - The percentage value of the limit at\n *   which point the count message is displayed. If this attribute is set, the\n *   count message will be hidden by default.\n * @property {CharacterCountTranslations} [i18n = CHARACTER_COUNT_TRANSLATIONS] - See constant {@link CHARACTER_COUNT_TRANSLATIONS}\n */\n\n/**\n * Character count translations\n *\n * @typedef {object} CharacterCountTranslations\n *\n * Messages shown to users as they type. It provides feedback on how many words\n * or characters they have remaining or if they are over the limit. This also\n * includes a message used as an accessible description for the textarea.\n * @property {TranslationPluralForms} [charactersUnderLimit] - Message displayed\n *   when the number of characters is under the configured maximum, `maxlength`.\n *   This message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining characters. This is a [pluralised list of\n *   messages](https://frontend.design-system.service.gov.uk/localise-govuk-frontend).\n * @property {string} [charactersAtLimit] - Message displayed when the number of\n *   characters reaches the configured maximum, `maxlength`. This message is\n *   displayed visually and through assistive technologies.\n * @property {TranslationPluralForms} [charactersOverLimit] - Message displayed\n *   when the number of characters is over the configured maximum, `maxlength`.\n *   This message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining characters. This is a [pluralised list of\n *   messages](https://frontend.design-system.service.gov.uk/localise-govuk-frontend).\n * @property {TranslationPluralForms} [wordsUnderLimit] - Message displayed when\n *   the number of words is under the configured maximum, `maxlength`. This\n *   message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining words. This is a [pluralised list of\n *   messages](https://frontend.design-system.service.gov.uk/localise-govuk-frontend).\n * @property {string} [wordsAtLimit] - Message displayed when the number of\n *   words reaches the configured maximum, `maxlength`. This message is\n *   displayed visually and through assistive technologies.\n * @property {TranslationPluralForms} [wordsOverLimit] - Message displayed when\n *   the number of words is over the configured maximum, `maxlength`. This\n *   message is displayed visually and through assistive technologies. The\n *   component will replace the `%{count}` placeholder with the number of\n *   remaining words. This is a [pluralised list of\n *   messages](https://frontend.design-system.service.gov.uk/localise-govuk-frontend).\n * @property {TranslationPluralForms} [textareaDescription] - Message made\n *   available to assistive technologies, if none is already present in the\n *   HTML, to describe that the component accepts only a limited amount of\n *   content. It is visible on the page when JavaScript is unavailable. The\n *   component will replace the `%{count}` placeholder with the value of the\n *   `maxlength` or `maxwords` parameter.\n */\n\n/**\n * @typedef {import('../../i18n.mjs').TranslationPluralForms} TranslationPluralForms\n */\n"],"names":[],"mappings":"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"}