<% navigation = GovukPublishingComponents::Presenters::ContextualNavigation.new(content_item, request.path) %>

<% if navigation.step_nav_helper.show_related_links? %>
  <!-- rendering step by step related items -->
  <%= render 'govuk_publishing_components/components/step_by_step_nav_related', links: navigation.step_nav_helper.related_links %>

  <% if navigation.step_nav_helper.show_sidebar? %>
    <!-- rendering step by step sidebar -->
    <%= render 'govuk_publishing_components/components/step_by_step_nav', navigation.step_nav_helper.sidebar %>
  <% end %>
<% else %>
  <% if navigation.should_present_taxonomy_navigation? %>
    <!-- rendering taxonomy sidebar -->
    <%= render partial: 'govuk_component/taxonomy_sidebar', locals: navigation.taxonomy_sidebar %>
  <% else %>
    <!-- rendering related navigation sidebar -->
    <%= render 'govuk_publishing_components/components/related_navigation', content_item %>
  <% end %>
<% end %>
