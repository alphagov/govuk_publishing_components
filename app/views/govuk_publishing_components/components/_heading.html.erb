<%
  brand ||= false
  lang = local_assigns[:lang].presence
  is_anchor = local_assigns[:is_anchor] || false

  brand_helper = GovukPublishingComponents::AppHelpers::BrandHelper.new(brand)
  heading_helper = GovukPublishingComponents::Presenters::HeadingHelper.new(local_assigns)
  shared_helper = GovukPublishingComponents::Presenters::SharedHelper.new(local_assigns)

  classes = %w(gem-c-heading)
  classes << heading_helper.classes
  classes << brand_helper.brand_class
  classes << brand_helper.border_color_class
  classes << shared_helper.get_margin_bottom if [*0..9].include?(local_assigns[:margin_bottom])
%>
<%= content_tag(shared_helper.get_heading_level, text,
  class: classes,
  id: heading_helper.id,
  lang: lang
) %>
<% if is_anchor %>
<a href="#<%= heading_helper.id %>">
  <span aria-hidden="true">#</span>
  <span class="govuk-visually-hidden">Section titled #{text}</span>
</a>
<% end %>
