{"version":3,"file":"details.js","sources":["../javascripts/govuk_publishing_components/modules/details.js"],"sourcesContent":["class GemDetails {\n  constructor($module) {\n    this.$module = $module\n    this.$summary = this.$module.querySelector('.govuk-details__summary')\n\n    this.customTrackLabel = this.$summary.getAttribute('data-track-label')\n    this.detailsClick = this.$module.querySelector('[data-details-track-click]')    \n  }\n\n  init() {\n    if (this.customTrackLabel) { // If a custom label has been provided, we can simply call the tracking module\n      var trackDetails = new window.GOVUK.Modules.GemTrackClick(this.$summary)\n      trackDetails.init()\n    } else if (this.detailsClick) { // If no custom label is set, we use the open/close status as the label\n      this.detailsClick.addEventListener('click', function (event) {\n        this.trackDefault(this.$summary)\n      }.bind(this))\n    }\n  }\n\n  trackDefault(element) {\n    if (window.GOVUK.analytics && window.GOVUK.analytics.trackEvent) {\n      var componentStatus = (this.$module.getAttribute('open') == null) ? 'open' : 'closed'\n      var trackCategory = element.getAttribute('data-track-category')\n      var trackAction = element.getAttribute('data-track-action')\n      var trackOptions = element.getAttribute('data-track-options')\n\n      if (trackOptions) {\n        trackOptions = JSON.parse(trackOptions)\n      }\n\n      if (typeof trackOptions !== 'object' || trackOptions === null) {\n        trackOptions = {}\n      }\n\n      trackOptions.label = componentStatus\n\n      if (trackAction && trackCategory) {\n        window.GOVUK.analytics.trackEvent(trackCategory, trackAction, trackOptions)\n      }\n    }\n  }\n}\n\nexport default GemDetails;\n"],"names":[],"mappings":";;;AAAA,MAAM,UAAU,GACd,SAAW,UAAA,CAAC,OAAO,EAAE;EACvB,EAAI,IAAI,CAAC,OAAO,GAAG,QAAO;EAC1B,EAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,yBAAyB,EAAC;AACzE;EACA,EAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,kBAAkB,EAAC;EAC1E,EAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,4BAA4B,EAAC;EAC9E,EAAC;AACH;EACE,UAAA,CAAA,SAAA,CAAA,IAAA,GAAA,SAAA,IAAA,IAAO;EACT,EAAI,IAAI,IAAI,CAAC,gBAAgB,EAAE;EAC/B,IAAM,IAAI,YAAY,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAC;EAC9E,IAAM,YAAY,CAAC,IAAI,GAAE;EACzB,GAAK,MAAM,IAAI,IAAI,CAAC,YAAY,EAAE;EAClC,IAAM,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE;EACnE,MAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAC;EACxC,KAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EACnB,GAAK;EACH,CAAC,CAAA;AACH;uBACE,YAAY,GAAA,SAAA,YAAA,EAAC,OAAO,EAAE;EACxB,EAAI,IAAI,MAAM,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,EAAE;EACrE,IAAM,IAAI,eAAe,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,IAAI,IAAI,MAAM,GAAG,SAAQ;EAC3F,IAAM,IAAI,aAAa,GAAG,OAAO,CAAC,YAAY,CAAC,qBAAqB,EAAC;EACrE,IAAM,IAAI,WAAW,GAAG,OAAO,CAAC,YAAY,CAAC,mBAAmB,EAAC;EACjE,IAAM,IAAI,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC,oBAAoB,EAAC;AACnE;EACA,IAAM,IAAI,YAAY,EAAE;EACxB,MAAQ,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,EAAC;EAC/C,KAAO;AACP;EACA,IAAM,IAAI,OAAO,YAAY,KAAK,QAAQ,IAAI,YAAY,KAAK,IAAI,EAAE;EACrE,MAAQ,YAAY,GAAG,GAAE;EACzB,KAAO;AACP;EACA,IAAM,YAAY,CAAC,KAAK,GAAG,gBAAe;AAC1C;EACA,IAAM,IAAI,WAAW,IAAI,aAAa,EAAE;EACxC,MAAQ,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,aAAa,EAAE,WAAW,EAAE,YAAY,EAAC;EACnF,KAAO;EACP,GAAK;EACH,CACD;;;;;;;;"}